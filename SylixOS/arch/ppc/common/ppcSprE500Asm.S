;/*********************************************************************************************************
;**
;**                                    中国软件开源组织
;**
;**                                   嵌入式实时操作系统
;**
;**                                       SylixOS(TM)
;**
;**                               Copyright  All Rights Reserved
;**
;**--------------文件信息--------------------------------------------------------------------------------
;**
;** 文   件   名: ppcSprE500Asm.S
;**
;** 创   建   人: Jiao.JinXing (焦进星)
;**
;** 文件创建日期: 2016 年 05 月 05 日
;**
;** 描        述: PowerPC E500 体系构架特殊功能寄存器接口.
;*********************************************************************************************************/

#ifndef ASSEMBLY
#define ASSEMBLY 1
#endif

#include <arch/assembler.h>
#include <arch/ppc/arch_e500.h>

    FILE_BEGIN()

    EXPORT_LABEL(ppcE500GetDEAR)
    EXPORT_LABEL(ppcE500GetHID1)
    EXPORT_LABEL(ppcE500SetHID1)

;/*********************************************************************************************************
;  SPR GET SET 宏
;*********************************************************************************************************/

MACRO_DEF(SET_SPR, spr)
    MTSPR       \spr , R3
    ISYNC
    BLR
    MACRO_END()

MACRO_DEF(GET_SPR, spr)
    MFSPR       R3 , \spr
    ISYNC
    BLR
    MACRO_END()

;/*********************************************************************************************************
;  读取 DEAR 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcE500GetDEAR)
    GET_SPR     DEAR
    FUNC_END()

;/*********************************************************************************************************
;  读写 HID1 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcE500GetHID1)
    GET_SPR     HID1
    FUNC_END()

FUNC_DEF(ppcE500SetHID1)
    SET_SPR     HID1
    FUNC_END()

    FILE_END()

;/*********************************************************************************************************
;  END
;*********************************************************************************************************/
